---
layout: page
title: Stratify OS Docs
---
{% include JB/setup %}
<script type="text/javascript" src="doxy-boot.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefmt.html">fmt</a></li><li class="navelem"><a class="el" href="classfmt_1_1_son.html">Son</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classfmt_1_1_son-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">fmt::Son&lt; stacksize &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Documentation</h2>
<div class="textblock"><h3>template&lt;int stacksize&gt;<br />
class fmt::Son&lt; stacksize &gt;</h3>

<p>The SON (Stratify Object Notation) is an important class to be familiar with. It is closely related to JSON (and very closely related to BSON). It allows you to store, access, and modify data in the same way you but is designed for use on resource constrained systems.</p>
<p>Important things to note:</p><ul>
<li>Key names are limited to 7 characters (longer names are truncated)</li>
<li>The stacksize template value is the depth limit when creating files</li>
<li>You can only append to files that are left with an open ended array</li>
<li>You can't modify the length of strings or data objects within a file</li>
<li>You must create "root" as the first object or array</li>
</ul>
<p>Creation example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stfy/Fmt.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]){</div><div class="line">     Son son&lt;4&gt;; <span class="comment">//depth is limited to 4</span></div><div class="line"></div><div class="line">  <span class="comment">//tabs are added to help visualize the parallel to JSON</span></div><div class="line">     son.create(<span class="stringliteral">&quot;/home/settings.son&quot;</span>);</div><div class="line">          son.open_obj(<span class="stringliteral">&quot;root&quot;</span>);</div><div class="line">               son.write(<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;Stratify&quot;</span>); <span class="comment">//create a string</span></div><div class="line">               son.write(<span class="stringliteral">&quot;date&quot;</span>, <span class="stringliteral">&quot;today&quot;</span>); <span class="comment">//makes sense</span></div><div class="line">               son.write(<span class="stringliteral">&quot;value&quot;</span>, (u32)100); <span class="comment">//write a number);</span></div><div class="line">               son.open_obj(<span class="stringliteral">&quot;stuff&quot;</span>);</div><div class="line">                    son.write(<span class="stringliteral">&quot;hour&quot;</span>, 12);</div><div class="line">                    son.write(<span class="stringliteral">&quot;min&quot;</span>, 00);</div><div class="line">                    son.write(<span class="stringliteral">&quot;sec&quot;</span>, 59);</div><div class="line">               son.close_obj();</div><div class="line">          son.close_obj();</div><div class="line">     son.close();</div><div class="line"></div><div class="line">     <span class="keywordtype">char</span> buffer[32];</div><div class="line">     u32 value;</div><div class="line">     son.open(<span class="stringliteral">&quot;/home/settings.son&quot;</span>); <span class="comment">//opens read-only</span></div><div class="line"></div><div class="line">     son.read_str(<span class="stringliteral">&quot;name&quot;</span>, buffer, 32);</div><div class="line">     <span class="comment">//buffer holds &quot;Stratify&quot;</span></div><div class="line"></div><div class="line">     value = son.read_unum(<span class="stringliteral">&quot;hour&quot;</span>);</div><div class="line">     son.read_str(<span class="stringliteral">&quot;sec&quot;</span>, buffer, 32);</div><div class="line">     <span class="comment">//buffer holds &quot;59&quot;</span></div><div class="line"></div><div class="line">     son.to_json(<span class="stringliteral">&quot;/home.settings.json&quot;</span>);</div><div class="line">     son.close();</div><div class="line"></div><div class="line">     }</div></div><!-- fragment --><p>The settings.json files looks like: </p><pre class="fragment">{
    "name": "Stratify",
    "date": "today",
    "value": "100",
    "stuff": {
        "hour": "12",
        "min": "0",
        "sec": "59"
     }
}</pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af8f102505b0810be6eeffb53d26eb52a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#af8f102505b0810be6eeffb53d26eb52a">fileno</a> () const </td></tr>
<tr class="separator:af8f102505b0810be6eeffb53d26eb52a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438e464305576b5db6e7486f3bbc6666"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a438e464305576b5db6e7486f3bbc6666">create</a> (const char *name)</td></tr>
<tr class="separator:a438e464305576b5db6e7486f3bbc6666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d58650ff3d332df374bbec2105a3ad1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a7d58650ff3d332df374bbec2105a3ad1">open</a> (const char *name)</td></tr>
<tr class="separator:a7d58650ff3d332df374bbec2105a3ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfd63b0572c84c3e65be0cb0399eae7e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#adfd63b0572c84c3e65be0cb0399eae7e">open_obj</a> (const char *key)</td></tr>
<tr class="separator:adfd63b0572c84c3e65be0cb0399eae7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d26da6943b70570cc4f33aef51f1667"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a9d26da6943b70570cc4f33aef51f1667">close_obj</a> ()</td></tr>
<tr class="separator:a9d26da6943b70570cc4f33aef51f1667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7a8cdf9da50de1c6d2d570945fcb8c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a1e7a8cdf9da50de1c6d2d570945fcb8c">open_array</a> (const char *key, int fixed_size=0)</td></tr>
<tr class="separator:a1e7a8cdf9da50de1c6d2d570945fcb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea2ecd1a05afdbfc9fc3aa2b1d07850d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#aea2ecd1a05afdbfc9fc3aa2b1d07850d">close_array</a> ()</td></tr>
<tr class="separator:aea2ecd1a05afdbfc9fc3aa2b1d07850d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba2d1c71b5a4c3afbe84d00ca9e12ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a1ba2d1c71b5a4c3afbe84d00ca9e12ee">open_data</a> (const char *key)</td></tr>
<tr class="separator:a1ba2d1c71b5a4c3afbe84d00ca9e12ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0d8b468db08ef8b6cf87b6c2428bc6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a2b0d8b468db08ef8b6cf87b6c2428bc6">close_data</a> ()</td></tr>
<tr class="separator:a2b0d8b468db08ef8b6cf87b6c2428bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6401c20ef33703a21a8678edcba5ad9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a6401c20ef33703a21a8678edcba5ad9f">write</a> (const char *key, const char *v)</td></tr>
<tr class="separator:a6401c20ef33703a21a8678edcba5ad9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b5729ffc30268a0a53c3ef1be5309d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a32b5729ffc30268a0a53c3ef1be5309d">write</a> (const char *key, i32 v)</td></tr>
<tr class="separator:a32b5729ffc30268a0a53c3ef1be5309d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d6676eee20de01c64b578b0e19c85c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a33d6676eee20de01c64b578b0e19c85c">write</a> (const char *key, u32 v)</td></tr>
<tr class="separator:a33d6676eee20de01c64b578b0e19c85c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f41e69baee67ac984a0f68bad020f4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a7f41e69baee67ac984a0f68bad020f4c">write</a> (const char *key, float v)</td></tr>
<tr class="separator:a7f41e69baee67ac984a0f68bad020f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf524eff3daa04f9b9668cb95b025205"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#abf524eff3daa04f9b9668cb95b025205">write</a> (const char *key, bool v)</td></tr>
<tr class="separator:abf524eff3daa04f9b9668cb95b025205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e5d53c19aa0e8392071d6f823f9459"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#ad0e5d53c19aa0e8392071d6f823f9459">write</a> (const char *key, const void *v, son_size_t <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___m_l_c_d.html#ga07a39d48e46b05223805b7a7efe606ca">size</a>)</td></tr>
<tr class="separator:ad0e5d53c19aa0e8392071d6f823f9459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a196c650b78eb750eba74720fee5a7148"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a196c650b78eb750eba74720fee5a7148">write_open_data</a> (const void *v, son_size_t <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___m_l_c_d.html#ga07a39d48e46b05223805b7a7efe606ca">size</a>)</td></tr>
<tr class="separator:a196c650b78eb750eba74720fee5a7148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f6d57d1afb13fe16b03c56fe944aaba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a8f6d57d1afb13fe16b03c56fe944aaba">read_str</a> (const char *<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___u_n_i___p_e_r_m_s.html#gaa6adc1f71f9027c8bdd8e88e8c843049">access</a>, char *str, son_size_t capacity)</td></tr>
<tr class="separator:a8f6d57d1afb13fe16b03c56fe944aaba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8868b18e46e0f32c7b7df726b9dff3ae"><td class="memItemLeft" align="right" valign="top">i32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a8868b18e46e0f32c7b7df726b9dff3ae">read_num</a> (const char *<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___u_n_i___p_e_r_m_s.html#gaa6adc1f71f9027c8bdd8e88e8c843049">access</a>)</td></tr>
<tr class="separator:a8868b18e46e0f32c7b7df726b9dff3ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168e14593a6d653e6c25048c6c4af22e"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a168e14593a6d653e6c25048c6c4af22e">read_unum</a> (const char *<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___u_n_i___p_e_r_m_s.html#gaa6adc1f71f9027c8bdd8e88e8c843049">access</a>)</td></tr>
<tr class="separator:a168e14593a6d653e6c25048c6c4af22e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526d883e980a97fc974d112505cd0916"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a526d883e980a97fc974d112505cd0916">read_float</a> (const char *<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___u_n_i___p_e_r_m_s.html#gaa6adc1f71f9027c8bdd8e88e8c843049">access</a>)</td></tr>
<tr class="separator:a526d883e980a97fc974d112505cd0916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df4b387b34da1d939320ecf15ab2d89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfmt_1_1_son.html#a5df4b387b34da1d939320ecf15ab2d89">read_data</a> (const char *<a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___u_n_i___p_e_r_m_s.html#gaa6adc1f71f9027c8bdd8e88e8c843049">access</a>, void *data, son_size_t <a class="elRef" doxygen="/Users/tgil/git/StratifyLabs.github.io/_StratifyOS/html/StratifyOS.tag:../../StratifyOS/html/" href="../../StratifyOS/html/group___m_l_c_d.html#ga07a39d48e46b05223805b7a7efe606ca">size</a>)</td></tr>
<tr class="separator:a5df4b387b34da1d939320ecf15ab2d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aea2ecd1a05afdbfc9fc3aa2b1d07850d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::close_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close an array </p>

</div>
</div>
<a class="anchor" id="a2b0d8b468db08ef8b6cf87b6c2428bc6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::close_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close a data object </p>

</div>
</div>
<a class="anchor" id="a9d26da6943b70570cc4f33aef51f1667"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::close_obj </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close an object </p>

</div>
</div>
<a class="anchor" id="a438e464305576b5db6e7486f3bbc6666"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new SON file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
<a class="anchor" id="af8f102505b0810be6eeffb53d26eb52a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::fileno </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The file descriptor of the SON file. </p>
<dl class="section return"><dt>Returns</dt><dd>SON File descriptor </dd></dl>

</div>
</div>
<a class="anchor" id="a7d58650ff3d332df374bbec2105a3ad1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Open a SON file for reading</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero on success </dd></dl>

</div>
</div>
<a class="anchor" id="a1e7a8cdf9da50de1c6d2d570945fcb8c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::open_array </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fixed_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Open an object </p>

</div>
</div>
<a class="anchor" id="a1ba2d1c71b5a4c3afbe84d00ca9e12ee"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::open_data </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Open a data object </p>

</div>
</div>
<a class="anchor" id="adfd63b0572c84c3e65be0cb0399eae7e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::open_obj </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Open an object </p>

</div>
</div>
<a class="anchor" id="a5df4b387b34da1d939320ecf15ab2d89"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::read_data </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">son_size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the specified key as data. Regardless of the storage type, the key will be returned as binary data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access</td><td>Key parameters </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to the destination data </td></tr>
    <tr><td class="paramname">size</td><td>The number of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read </dd></dl>

</div>
</div>
<a class="anchor" id="a526d883e980a97fc974d112505cd0916"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::read_float </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>access</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the specified key as a number (float). If the original key was not written as a i32, it will be converted to one. A string of "100" will be converted to (float)100. Objects that cannot be converted will return 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access</td><td>Key parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number </dd></dl>

</div>
</div>
<a class="anchor" id="a8868b18e46e0f32c7b7df726b9dff3ae"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">i32 <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::read_num </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>access</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the specified key as a number (i32). If the original key was not written as a i32, it will be converted to one. A string of "100" will be converted to (i32)100. Objects that cannot be converted will return 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access</td><td>Key parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number </dd></dl>

</div>
</div>
<a class="anchor" id="a8f6d57d1afb13fe16b03c56fe944aaba"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::read_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">son_size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the specified key as a string. If the original key was not written as a string, it will be converted to a string. For example, a (u32)100 will be converted to "100". A data object will be converted to base64 encoding.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access</td><td>Key parameters </td></tr>
    <tr><td class="paramname">str</td><td>Pointer to the destination data </td></tr>
    <tr><td class="paramname">capacity</td><td>Size of <em>str</em> buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes actually read </dd></dl>

</div>
</div>
<a class="anchor" id="a168e14593a6d653e6c25048c6c4af22e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u32 <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::read_unum </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>access</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read the specified key as a number (u32). If the original key was not written as a i32, it will be converted to one. A string of "100" will be converted to (u32)100. Objects that cannot be converted will return 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">access</td><td>Key parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number </dd></dl>

</div>
</div>
<a class="anchor" id="a6401c20ef33703a21a8678edcba5ad9f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a key/string pair to the file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>A pointer to the string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes in the value portion to be successfully stored </dd></dl>

</div>
</div>
<a class="anchor" id="a32b5729ffc30268a0a53c3ef1be5309d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">i32&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a key/number pair to the file (i32)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>The number to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes stored (4) if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a33d6676eee20de01c64b578b0e19c85c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a key/number pair to the file (u32)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>The number to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes stored (4) if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a7f41e69baee67ac984a0f68bad020f4c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a key/number pair to the file (float)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>The number to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes stored (4) if successful </dd></dl>

</div>
</div>
<a class="anchor" id="abf524eff3daa04f9b9668cb95b025205"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a key/bool pair to the file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>true or false </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes stored if successful </dd></dl>

</div>
</div>
<a class="anchor" id="ad0e5d53c19aa0e8392071d6f823f9459"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">son_size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a key/data pair to the file. The data is stored in the file in binary format</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>A pointer to the data to be written </td></tr>
    <tr><td class="paramname">size</td><td>The number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes stored (4) if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a196c650b78eb750eba74720fee5a7148"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int stacksize&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classfmt_1_1_son.html">fmt::Son</a>&lt; stacksize &gt;::write_open_data </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">son_size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add data to an open key. This is used with <a class="el" href="classfmt_1_1_son.html#a1ba2d1c71b5a4c3afbe84d00ca9e12ee">open_data()</a> and <a class="el" href="classfmt_1_1_son.html#a2b0d8b468db08ef8b6cf87b6c2428bc6">close_data()</a>. These methods are useful for writing data to the file when the amount of data to be written is unknown when writing begins.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stfy/Var.hpp&gt;</span></div><div class="line">Son son&lt;4&gt;;</div><div class="line"></div><div class="line">son.create(<span class="stringliteral">&quot;/home/data.son&quot;</span>);</div><div class="line">son.open_data(<span class="stringliteral">&quot;datakey&quot;</span>);</div><div class="line">son.write_open_data(buffer, 32);</div><div class="line">son.close_data();</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The value key </td></tr>
    <tr><td class="paramname">v</td><td>A pointer to the data to be written </td></tr>
    <tr><td class="paramname">size</td><td>The number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes stored (4) if successful </dd></dl>

</div>
</div>
</div><!-- contents -->
